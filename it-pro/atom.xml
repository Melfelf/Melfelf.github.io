<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title>MelfsBlog - IT Pro Blog</title>
    <subtitle>A blog about stuff</subtitle>
    <link rel="self" type="application/atom+xml" href="https://melf.ch/it-pro/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://melf.ch/it-pro/"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2025-06-08T00:00:00+00:00</updated>
    <id>https://melf.ch/it-pro/atom.xml</id>
    <entry xml:lang="en">
        <title>AVD Custom Image creation</title>
        <published>2025-06-08T00:00:00+00:00</published>
        <updated>2025-06-08T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://melf.ch/it-pro/avd-custom-image-creation/"/>
        <id>https://melf.ch/it-pro/avd-custom-image-creation/</id>
        
        <content type="html" xml:base="https://melf.ch/it-pro/avd-custom-image-creation/">&lt;h2 id=&quot;concept-automated-custom-image-creation-for-avd&quot;&gt;Concept: Automated Custom Image Creation for AVD&lt;a class=&quot;zola-anchor&quot; href=&quot;#concept-automated-custom-image-creation-for-avd&quot; aria-label=&quot;Anchor link for: concept-automated-custom-image-creation-for-avd&quot; style=&quot;visibility: hidden;&quot;&gt;&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;objective&quot;&gt;Objective&lt;a class=&quot;zola-anchor&quot; href=&quot;#objective&quot; aria-label=&quot;Anchor link for: objective&quot; style=&quot;visibility: hidden;&quot;&gt;&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;p&gt;We implemented an automated process for creating and maintaining custom images for Azure Virtual Desktop (AVD) using Azure Image Builder. The solution supports multiple environments and client types through a configuration-based approach, ensuring consistent and optimized image deployment across the organization.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;key-features&quot;&gt;Key Features&lt;a class=&quot;zola-anchor&quot; href=&quot;#key-features&quot; aria-label=&quot;Anchor link for: key-features&quot; style=&quot;visibility: hidden;&quot;&gt;&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Multi-Environment Support:&lt;&#x2F;strong&gt; Single image build process supporting multiple environments and client types&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Automation:&lt;&#x2F;strong&gt; Fully automated image creation through pipeline integration&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Configuration Management:&lt;&#x2F;strong&gt; Uses configuration files for flexible environment-specific settings&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Identity Management:&lt;&#x2F;strong&gt; Specifically designed for Intune-managed AAD-only clients&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Image Optimization:&lt;&#x2F;strong&gt; Includes automated cleanup and optimization procedures&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Post-Deployment:&lt;&#x2F;strong&gt; Automated post-setup tasks after deployment&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;solution-overview&quot;&gt;Solution Overview&lt;a class=&quot;zola-anchor&quot; href=&quot;#solution-overview&quot; aria-label=&quot;Anchor link for: solution-overview&quot; style=&quot;visibility: hidden;&quot;&gt;&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;p&gt;The solution encompasses the following key components and steps:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Image Configuration Setup:&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Implementation of environment-specific configuration files
Configuration files control which software should be installed in each image. These configuration files can also be used for additional specific configurations.
The configuration files are selected and applied based on the image template names.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Setting of registry keys for client identification
Identification parameters such as environment, stage, build date, template name and other details are stored as registry keys.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Configuration of environment-specific settings
Settings can be configured individually depending on the stage or environment. The identification is done using the registry keys mentioned above.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Software Management:&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Automated software package download&lt;&#x2F;li&gt;
&lt;li&gt;Silent installation procedures&lt;&#x2F;li&gt;
&lt;li&gt;Environment-specific application deployment&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Image Optimization:&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Removal of unnecessary components (Bloatware)&lt;&#x2F;li&gt;
&lt;li&gt;System optimization for AVD workloads&lt;&#x2F;li&gt;
&lt;li&gt;Implementation of best practices for image management&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Automation Pipeline:&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Integration with CI&#x2F;CD pipelines&lt;&#x2F;li&gt;
&lt;li&gt;Automated triggering of new image builds&lt;&#x2F;li&gt;
&lt;li&gt;Version control and image management&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Post-Deployment Configuration:&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Automated post-setup script execution&lt;&#x2F;li&gt;
&lt;li&gt;AAD tenant join procedures&lt;&#x2F;li&gt;
&lt;li&gt;Client status tagging and validation&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Monitoring and Validation:&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Deployment status tracking&lt;&#x2F;li&gt;
&lt;li&gt;Client self-tagging verification&lt;&#x2F;li&gt;
&lt;li&gt;Success criteria validation&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>AVD Rolling Hostpool Update</title>
        <published>2025-06-07T00:00:00+00:00</published>
        <updated>2025-06-07T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://melf.ch/it-pro/avd-rolling-hostpool-update/"/>
        <id>https://melf.ch/it-pro/avd-rolling-hostpool-update/</id>
        
        <content type="html" xml:base="https://melf.ch/it-pro/avd-rolling-hostpool-update/">&lt;h2 id=&quot;concept-automated-rolling-updates-for-avd-hostpools&quot;&gt;Concept: Automated Rolling Updates for AVD Hostpools&lt;a class=&quot;zola-anchor&quot; href=&quot;#concept-automated-rolling-updates-for-avd-hostpools&quot; aria-label=&quot;Anchor link for: concept-automated-rolling-updates-for-avd-hostpools&quot; style=&quot;visibility: hidden;&quot;&gt;&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;objective&quot;&gt;Objective&lt;a class=&quot;zola-anchor&quot; href=&quot;#objective&quot; aria-label=&quot;Anchor link for: objective&quot; style=&quot;visibility: hidden;&quot;&gt;&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;p&gt;Design and implement a fully automated process for updating (redeploying) all session hosts within an Azure Virtual Desktop (AVD) hostpool. The solution must support scheduled (daily, weekly, monthly) and on-demand updates, operate without manual intervention, and ensure minimal disruption to end users by gracefully draining active sessions.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;key-requirements&quot;&gt;Key Requirements&lt;a class=&quot;zola-anchor&quot; href=&quot;#key-requirements&quot; aria-label=&quot;Anchor link for: key-requirements&quot; style=&quot;visibility: hidden;&quot;&gt;&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Automation:&lt;&#x2F;strong&gt; The update process is entirely automated, requiring no manual interaction.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Flexible Scheduling:&lt;&#x2F;strong&gt; Updates can be triggered on a regular schedule or on demand.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;User Session Management:&lt;&#x2F;strong&gt; Active user sessions are drained with a configurable grace period to prevent abrupt disconnections.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Image and Disk Management:&lt;&#x2F;strong&gt; Session hosts are deployed from a custom image and provisioned to ephemeral disks for optimal performance and security.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Disaster Recovery:&lt;&#x2F;strong&gt; Fixed disk session hosts are maintained for non-24&#x2F;7 scenarios, serving as disaster recovery backups and supporting VM hibernation for cost efficiency.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;solution-overview&quot;&gt;Solution Overview&lt;a class=&quot;zola-anchor&quot; href=&quot;#solution-overview&quot; aria-label=&quot;Anchor link for: solution-overview&quot; style=&quot;visibility: hidden;&quot;&gt;&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;p&gt;The solution involves the following key components and steps:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Custom Image Creation:&lt;&#x2F;strong&gt; Develop a custom image containing the necessary applications and configurations for the session hosts.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Hostpool Configuration:&lt;&#x2F;strong&gt; Set up an AVD hostpool with the desired number of session hosts, using the custom image for deployment.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Ephemeral Disk Provisioning:&lt;&#x2F;strong&gt; Configure session hosts to use ephemeral disks, ensuring fast and secure temporary storage.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Automation Script Development:&lt;&#x2F;strong&gt; Create scripts to automate the update process, including session host redeployment and user session management.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Scheduled Tasks:&lt;&#x2F;strong&gt; Configure Azure Automation or similar services to trigger the update scripts based on the defined schedule (daily, weekly, monthly).&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;On-Demand Update Mechanism:&lt;&#x2F;strong&gt; Implement a method for manually triggering updates when immediate action is required.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Monitoring and Alerts:&lt;&#x2F;strong&gt; Set up monitoring for the update process, with alerts for any failures or issues that require attention.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Intune Management</title>
        <published>2025-06-07T00:00:00+00:00</published>
        <updated>2025-06-07T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://melf.ch/it-pro/intune/"/>
        <id>https://melf.ch/it-pro/intune/</id>
        
        <content type="html" xml:base="https://melf.ch/it-pro/intune/">&lt;h2 id=&quot;professional-concept-intune-management-for-modern-workplaces&quot;&gt;Professional Concept: Intune Management for Modern Workplaces&lt;a class=&quot;zola-anchor&quot; href=&quot;#professional-concept-intune-management-for-modern-workplaces&quot; aria-label=&quot;Anchor link for: professional-concept-intune-management-for-modern-workplaces&quot; style=&quot;visibility: hidden;&quot;&gt;&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;This concept outlines a structured approach to managing Microsoft Intune in highly complex environments, supporting multiple scenarios such as Azure Virtual Desktop (AVD), hardware clients, multisession environments, and Autopilot deployments.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;key-aspects&quot;&gt;Key Aspects&lt;a class=&quot;zola-anchor&quot; href=&quot;#key-aspects&quot; aria-label=&quot;Anchor link for: key-aspects&quot; style=&quot;visibility: hidden;&quot;&gt;&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Multiple Environments:&lt;&#x2F;strong&gt; Strategies for managing diverse device types and deployment models.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Policy Management:&lt;&#x2F;strong&gt; Establishing a clear naming convention for policies to ensure consistency and traceability.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Assignments and Filtering:&lt;&#x2F;strong&gt; Best practices for assigning policies to devices and users, utilizing multiple filters for granular targeting.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Multisession Considerations:&lt;&#x2F;strong&gt; Addressing the unique requirements of multisession environments.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Autopilot Considerations:&lt;&#x2F;strong&gt; Special handling and configuration for Autopilot scenarios.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
</feed>
